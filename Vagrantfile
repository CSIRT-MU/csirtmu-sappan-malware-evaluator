
Vagrant.configure("2") do |config|
    config.vm.box = "bento/ubuntu-20.04"
    config.vm.network 'private_network', ip: '192.168.10.10'
    config.vm.provider :virtualbox do |vb|
        vb.memory = 4096
        vb.cpus = 2
    end

    ### forward all services
    config.vm.network "forwarded_port", guest: 8996, host: 8996
    config.vm.network "forwarded_port", guest: 8997, host: 8997
    config.vm.network "forwarded_port", guest: 8998, host: 8998
    config.vm.network "forwarded_port", guest: 8999, host: 8999
    config.vm.network "forwarded_port", guest: 9001, host: 9001
    config.vm.network "forwarded_port", guest: 9003, host: 9003
    config.vm.network "forwarded_port", guest: 9006, host: 9006
    config.vm.network "forwarded_port", guest: 9007, host: 9007

    config.vm.hostname = "malware-pipeline"

    config.vm.provision "ansible_local" do |ansible|
        ansible.playbook = "playbook.yml"
        ansible.inventory_path = "/vagrant/ansible/hosts"
        ansible.limit = "all"
        ansible.provisioning_path="/vagrant/ansible"
    end
end
