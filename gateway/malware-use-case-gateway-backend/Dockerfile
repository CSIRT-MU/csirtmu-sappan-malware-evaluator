FROM python:3.8-slim-buster

ENV PYTHONUNBUFFERED 1

COPY csirtmu/ /app/csirtmu/
COPY pyproject.toml poetry.lock /app/

WORKDIR /app

RUN pip install poetry
RUN poetry install

EXPOSE 9005

ENTRYPOINT ["poetry", "run", "uvicorn", "--loop", "uvloop", "csirtmu.malware_gateway_backend.app:app", \
            "--host", "0.0.0.0", "--port", "9005"]