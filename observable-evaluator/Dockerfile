FROM python:3.9-slim-buster

ENV PYTHONUNBUFFERED 1

COPY csirtmu/ /app/csirtmu/
COPY pyproject.toml poetry.lock /app/

WORKDIR /app

RUN pip install poetry
RUN poetry install

ENTRYPOINT poetry run uvicorn csirtmu.observable_evaluator.app:app --host 0.0.0.0