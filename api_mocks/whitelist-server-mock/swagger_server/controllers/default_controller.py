import connexion
import six

from swagger_server.models.array_of_records import ArrayOfRecords  # noqa: E501
from swagger_server import util

from swagger_server.models.record import Record  # noqa: E501
from swagger_server.storage.storage import Storage

db = Storage()


def list_records():  # noqa: E501
    """List all records

     # noqa: E501


    :rtype: ArrayOfRecordsNoID
    """
    data = []
    for record in db.get_records().values():
        data.append(record)
    return data


def new_record(body):  # noqa: E501
    """Create new record

     # noqa: E501

    :param body: Creates new record, comment is optional
    :type body: dict | bytes

    :rtype: Record
    """
    if connexion.request.is_json:
        body = Record.from_dict(connexion.request.get_json())  # noqa: E501
        return db.create_record(body)
    return "Bad input"
