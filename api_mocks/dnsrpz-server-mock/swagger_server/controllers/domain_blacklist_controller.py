import connexion
import six
from datetime import datetime
from swagger_server.models.inline_response200 import InlineResponse200  # noqa: E501
from swagger_server.models.inline_response500 import InlineResponse500  # noqa: E501
from swagger_server import util
from swagger_server.storage.storage import Storage

storage = Storage()

def get_list(action, zone=None, domain=None, entry="CNAME", target=".", reason=None):  # noqa: E501
    if (zone != "black" and zone != "white"):
        return
    if (action == "list"):
        return storage.get_zone(zone)
    elif (action == "add"):
        now = datetime.now()
        now = now.strftime("%Y-%M-%dT%H:%M:%S")
        storage.add_to_zone(zone, domain = domain, entry = entry, target = target, reason = reason, listed = now)
        return "ok"
    elif (action == "remove"):
        storage.remove_from_zone(zone, domain = domain, entry = entry, target = target, reason = reason)
        return "ok"
